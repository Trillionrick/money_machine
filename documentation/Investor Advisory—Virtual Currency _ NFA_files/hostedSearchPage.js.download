!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("coveo-search-ui")):"function"==typeof define&&define.amd?define(["coveo-search-ui"],t):"object"==typeof exports?exports.CoveoHostedSearchPage=t(require("coveo-search-ui")):e.CoveoHostedSearchPage=t(e.Coveo)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2),t);n(3).swapVar(this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostedSearchPage=void 0;const r=document.createElement("template");r.innerHTML='<div id="hostedSearchPage"></div>';class o extends HTMLElement{constructor(){super(),this._options={orgId:"",pageId:"",apiKey:"",htmlOnly:!1,restUri:"https://platform.cloud.coveo.com"}}connectedCallback(){this._attachShadow=this.getAttribute("attachShadow")&&"true"==this.getAttribute("attachShadow"),this._attachShadow?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._root.appendChild(r.content.cloneNode(!0)),this.searchPage=this._root.querySelector("#hostedSearchPage"),this.state={scriptsLoaded:0,inlineScriptsInjected:0,error:""}}getModel(){const{orgId:e,pageId:t,apiKey:n,restUri:r}=this._options;return new Promise((o,i)=>{fetch(`${r}/rest/organizations/${e}/pages/${t}`,{headers:new Headers({Authorization:"Bearer "+n})}).then(e=>e.json()).then(e=>{this.renderSearchPage(e),o()}).catch(e=>i(e))})}configure(e){return this.options=e,this.getModel()}renderSearchPage(e){this.searchPage.innerHTML=e.html,this.options.htmlOnly||(this.addScriptFiles(e),this.addStyleFiles(e))}addScriptFiles(e){e.javascript&&(this._searchPageScripts=e.javascript.filter(e=>e.Name.indexOf("InterfaceEditor")<0),this._searchPageScripts.forEach(e=>{const t=document.createElement("script");t.type="text/javascript",e.URL?(t.src=e.URL,t.async=!1,"CoveoSearchUI"===e.Name&&t.classList.add("coveo-script"),t.addEventListener("load",()=>{this.state={scriptsLoaded:this.state.scriptsLoaded+1,inlineScriptsInjected:this.state.inlineScriptsInjected,error:this.state.error},this.coveoExternalScriptsLoaded()},{once:!0}),this._attachShadow?this._root.insertBefore(t,this._searchPage):document.head.appendChild(t)):document.addEventListener("CoveoExternalScriptsLoaded",()=>{t.insertAdjacentHTML("beforeend",e.InlineContent),this._attachShadow?this._root.insertBefore(t,this._searchPage):document.head.appendChild(t),this.state={scriptsLoaded:this.state.scriptsLoaded,inlineScriptsInjected:this.state.inlineScriptsInjected+1,error:this.state.error},this.coveoScriptsLoaded()})}))}addStyleFiles(e){e.css&&(this._searchPageStyles=e.css.filter(e=>e.Name.indexOf("InterfaceEditor")<0),this._searchPageStyles.forEach(e=>{if(e.URL){const t=document.createElement("link");t.href=e.URL,t.rel="stylesheet",t.id=e.Name,this._attachShadow?this._root.insertBefore(t,this._searchPage):document.head.appendChild(t)}else{const t=document.createElement("style");t.insertAdjacentHTML("beforeend",e.InlineContent),this._attachShadow?this._root.insertBefore(t,this._searchPage):document.head.appendChild(t)}}))}coveoExternalScriptsLoaded(){this.state.scriptsLoaded===this._searchPageScripts.filter(e=>e.URL).length&&document.dispatchEvent(new CustomEvent("CoveoExternalScriptsLoaded"))}coveoScriptsLoaded(){this.state.inlineScriptsInjected===this._searchPageScripts.filter(e=>e.InlineContent).length&&document.dispatchEvent(new CustomEvent("CoveoScriptsLoaded"))}get options(){return this._options}set options(e){this._options=Object.assign(this._options||{},e)}get state(){return this._state}set state(e){this._state=e}get searchPage(){return this._searchPage}set searchPage(e){this._searchPage=e}}t.HostedSearchPage=o,customElements.get("hosted-search-page")||customElements.define("hosted-search-page",o)},function(e,t,n){var r;window,r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.component=void 0;var r=n(1);t.component=function(e){return r.Initialization.registerAutoCreateComponent(e),e}},function(t,n){t.exports=e},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4),t),o(n(6),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(0),t),o(n(5),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazyComponent=t.lazyDependentComponent=void 0;var r=n(1),o=n(0);t.lazyDependentComponent=function(e){return function(t){return r.LazyInitialization?(r.LazyInitialization.registerLazyComponent(t.ID,(function(){return r.load(e).then((function(){return o.component(t)}))})),t):o.component(t)}},t.lazyComponent=function(e){return r.LazyInitialization?(r.LazyInitialization.registerLazyComponent(e.ID,o.component(e)),e):o.component(e)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.swapVar=void 0,t.swapVar=function(e){window.Coveo?window.Coveo=r(r({},e),window.Coveo):window.Coveo=e}}])},e.exports=r(n(4))},function(t,n){t.exports=e}])}));
